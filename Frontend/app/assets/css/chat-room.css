/* chat-room.css - 다크 테마 메시지 룸 스타일 */

/* 기본 변수 (global.css에 있으면 덮어쓰지 않음) */
:root {
  --bg: #0b0f14;
  --panel: #2f3136;
  --muted: #9aa6b6;
  --text: #e6eef8;
  --accent: #5b6bff;
  --accent-2: #7f9bff;
  --bubble-other: rgba(255,255,255,0.03);
  --bubble-me-grad: linear-gradient(
    90deg,
    #2d3a4a,
    #1f2a36
  );
  --radius: 14px;
}

/* 컨테이너 */
.chat-container {
  display: flex;
  flex-direction: column;
  height: 100%;          /* 부모가 100vh라면 전체 높이 채움 */
  background: linear-gradient(180deg, rgba(6,8,12,0.6), rgba(11,15,20,0.8));
  color: var(--text);
  box-sizing: border-box;
}

/* 메시지 리스트 영역 */
.messages {
  flex: 1 1 auto;
  overflow-y: auto;
  padding: 18px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  scrollbar-width: thin;
  scrollbar-color: rgba(255,255,255,0.06) transparent;
}

/* 웹킷 스크롤바 */
.messages::-webkit-scrollbar { width: 12px; }
.messages::-webkit-scrollbar-track { background: transparent; }
.messages::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.05);
  border-radius: 999px;
  border: 3px solid transparent;
  background-clip: content-box;
}

/* 메시지 기본 스타일 */
.message {
  display: inline-flex;
  flex-direction: column;
  gap: 6px;
  max-width: 72%;          /* 한 줄 폭 제한 */
  word-break: break-word;
  line-height: 1.45;
  transition: transform .12s ease, box-shadow .12s ease;
  padding: 10px 14px;
  border-radius: var(--radius);
  box-shadow: 0 6px 18px rgba(2,6,23,0.45);
  align-self: flex-start;  /* 기본은 왼쪽(상대) */
  background: var(--bubble-other);
  color: var(--text);
}

/* 사용자 아바타 / 헤더 */
.message-header {
  display: flex;
  gap: 10px;
  align-items: center;
  font-size: 0.95rem;
}
.avatar {
  width: 36px;
  height: 36px;
  border-radius: 999px;
  object-fit: cover;
  flex-shrink: 0;
  border: 2px solid rgba(255,255,255,0.03);
  background: linear-gradient(180deg, rgba(80,90,255,0.9), rgba(120,140,255,0.9));
}

/* 닉네임 / 시간 */
.message .nickname {
  font-weight: 700;
}
.small {
  font-size: 0.78rem;
  color: var(--muted);
  margin-left: 8px;
}

/* 내 메시지 스타일 (오른쪽 정렬) */
.message.me {
  align-self: flex-end;
  background: var(--bubble-me-grad);
  color: #fff;
  border-bottom-right-radius: 6px;
  border-bottom-left-radius: var(--radius);
  transform-origin: 100% 50%;
}
.message.me .message-header { order: -1; /* 헤더를 위로 */ }
.message.me .small { color: rgba(255,255,255,0.85); font-weight: 500; }

/* 상대 메시지 세부 */
.message.other {
  align-self: flex-start;
  background: var(--bubble-other);
  color: var(--text);
  border-bottom-left-radius: 6px;
  border-bottom-right-radius: var(--radius);
}
.message.other .small { color: var(--muted); }

/* 메시지 내용(텍스트 본문) */
.message > div:last-child {
  white-space: pre-wrap; /* 줄바꿈 유지 */
  font-size: 1rem;
}

/* 입력창(컴포저) */
.input-form {
  display: flex;
  gap: 10px;
  padding: 12px 14px;
  border-top: 1px solid rgba(255,255,255,0.03);
  background: linear-gradient(180deg, rgba(10,12,14,0.6), rgba(8,9,11,0.6));
  align-items: center;
}
.input-form input {
  flex: 1;
  padding: 10px 14px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.04);
  background: rgba(255,255,255,0.02);
  color: var(--text);
  outline: none;
  font-size: 1rem;
  transition: box-shadow .12s ease, border-color .12s ease;
}
.input-form input::placeholder { color: rgba(170,186,200,0.45); }
.input-form input:focus {
  border-color: rgba(91,107,255,0.95);
  box-shadow: 0 6px 20px rgba(91,107,255,0.08);
}

/* 전송 버튼 */
.input-form button {
  padding: 10px 16px;
  border-radius: 10px;
  border: 0;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color: #fff;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 8px 22px rgba(91,107,255,0.12);
  transition: transform .08s ease, opacity .12s ease;
}
.input-form button:hover { transform: translateY(-2px); }
.input-form button:active { transform: translateY(0); }
.input-form button:disabled { opacity: 0.5; cursor: not-allowed; }

/* 반응형: 좁은 화면에서 패딩/폰트 축소 */
@media (max-width: 720px) {
  .messages { padding: 12px; gap: 10px; }
  .message { max-width: 86%; padding: 10px; border-radius: 12px; }
  .avatar { width: 32px; height: 32px; }
  .input-form { padding: 10px; }
}

/* 접근성: 키보드 포커스 */
.input-form input:focus-visible, .input-form button:focus-visible, .message:focus-visible {
  outline: 3px solid rgba(91,107,255,0.12);
  outline-offset: 2px;
}

.user-avatar img {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
}